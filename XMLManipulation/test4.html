<html>
<body>
<h1>W3Schools Internal Note</h1>
<input
    class="input"
    ref="file"
    type="file"
    @change="handleFileChange"
/>  
<div>
<b>To:</b> <span id="to"></span><br />
<b>From:</b> <span id="from"></span><br />
<b>Message:</b> <span id="message"></span>
</div>

<script type="module">
    import { Blob } from 'buffer';
// 获取本地上传文件路径
const getUploadUrl = function(flie) {

    let url = "";
    if (window.createObjectURL != undefined) {
        // basic
        url = window.createObjectURL(flie);
    } else if (window.webkitURL != undefined) {
        // webkit or chrome


        let url = null;
        const binaryData = [];
        binaryData.push(bolb);

        url = window.URL.createObjectURL(new Blob(binaryData,{type:'application/xml;charset=UTF-8'}));
    } else if (window.URL != undefined) {
        // mozilla(firefox)
        url = window.URL.createObjectURL(flie);
    }
    console.log("The new url is: ")
    console.log(url);
    return url; // 返回这样的一串地址 blob:http://www.xxxx.com/2c230fa5-ecc4-4314-ae7c-c39eaa66a945
};
const loadXML = function(xmlFile) {
    var xmlDom = null;
    if (window.ActiveXObject) {
        xmlDom = new ActiveXObject("Microsoft.XMLDOM");
        xmlDom.async = "false";
        xmlDom.load(xmlFile);
    } else if (
        document.implementation &&
        document.implementation.createDocument
    ) {
        var xmlhttp = new window.XMLHttpRequest();
        xmlhttp.open("GET", xmlFile, false);
        xmlhttp.send(null);
        xmlDom = xmlhttp.responseXML;
    } else {
        xmlDom = null;
    }
    return xmlDom; // 返回的是一个doucument的对象
};
console.log("The beginning is right.\n")
let url = getUploadUrl("note3.xml"); // 文件对象
let xml = loadXML(url);
let text = new XMLSerializer().serializeToString(xml) // 将text赋值给textarea阔以了

// 赋值文本框
var element = document.getElementById('textarea');
element.value  = text 
</script>
<p id = "textarea"> </p>
</body>
</html>